<style lang="less">
.container {
  height: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: space-between;
  box-sizing: border-box;
}
@font-face {font-family: "iconfont";
  src: url('//at.alicdn.com/t/font_1139873_8xf8ae3eih.eot?t=1557543743026'); /* IE9 */
  src: url('//at.alicdn.com/t/font_1139873_8xf8ae3eih.eot?t=1557543743026#iefix') format('embedded-opentype'), /* IE6-IE8 */
  url('data:application/x-font-woff2;charset=utf-8;base64,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') format('woff2'),
  url('//at.alicdn.com/t/font_1139873_8xf8ae3eih.woff?t=1557543743026') format('woff'),
  url('//at.alicdn.com/t/font_1139873_8xf8ae3eih.ttf?t=1557543743026') format('truetype'), /* chrome, firefox, opera, Safari, Android, iOS 4.2+ */
  url('//at.alicdn.com/t/font_1139873_8xf8ae3eih.svg?t=1557543743026#iconfont') format('svg'); /* iOS 4.1- */
}

.iconfont {
  font-family: "iconfont" !important;
  font-size: 16px;
  font-style: normal;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.icondaishouhuo:before {
  content: "\e604";
}

.icondaifukuan:before {
  content: "\e60b";
}

.iconkefu:before {
  content: "\e621";
}

.iconxiazai17:before {
  content: "\e611";
}

.iconicon5:before {
  content: "\e66c";
}

.icongouwuche1:before {
  content: "\e656";
}

.iconweibiaoti2fuzhi12:before {
  content: "\e629";
}

.iconplus:before {
  content: "\e62c";
}

.iconshop:before {
  content: "\e618";
}

.icongouwuche:before {
  content: "\e601";
}

.iconhome:before {
  content: "\e602";
}

.iconcheckbox-blank-circle-outline:before {
  content: "\e69e";
}

.iconkefu1:before {
  content: "\e734";
}

.iconminus:before {
  content: "\e673";
}

.iconxiaoxi:before {
  content: "\e619";
}

.icontool_brief:before {
  content: "\e646";
}

.iconxingxing:before {
  content: "\e617";
}

.icondingdan:before {
  content: "\e719";
}

.iconcheckbox-marked-circ:before {
  content: "\e626";
}

</style>

<script>
import wepy from '@wepy/core'
import eventHub from './common/eventHub'

wepy.app({
  hooks: {
    // App 级别 hook，对整个 App 生效
    // 同时存在 Page hook 和 App hook 时，优先执行 Page hook，返回值再交由 App hook 处
    'before-setData': function (dirty) {
      console.log('setData dirty: ', dirty)
      return dirty
    }
  },
  globalData: {
    userInfo: null
  },
  data: {
    goodsCart: []
  },
  onLaunch() {
    this.testAsync()
    eventHub.$on('app-launch', (...args) => {
      console.log('app-launch event emitted, the params are:')
      console.log(args)
    })
  },
  onShow() {
    this.goodsCart = wx.getStorageSync('cartData') || []
    let total = 0
    this.goodsCart.map(item => {
      if (item.selected === true) {
        total += item.num
      }
    })
    if (total === 0) {
      return false
    }
    wx.setTabBarBadge({
      index: 2,
      text: total.toString()
    })
  },

  methods: {

    sleep (s) {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          resolve('promise resolved')
        }, s * 1000)
      })
    },

    async testAsync () {
      let d = await this.sleep(3)
      console.log(d)
    }
  }
})
</script>
<config>
{
    pages: [
      'pages/index',
      'pages/category/index',
      'pages/cart',
      'pages/mine',
      'pages/search',
      'pages/goods-list',
      'pages/goods-datil'


      
    ],
    window: {
      backgroundTextStyle: 'light',
      navigationBarBackgroundColor: '#ff2d4a',
      navigationBarTitleText: '一缘商城',
      navigationBarTextStyle: 'white'
    },
    "tabBar":{
      'list':[{
        'pagePath':'pages/index',
        'text':'首页',
        "iconPath":"static/images/home.png",
        "selectedIconPath":"static/images/home-active.png"
      },
      {
        'pagePath':'pages/category/index',
        'text':'分类',
       "iconPath":"static/images/cates.png",
        "selectedIconPath":"static/images/cates-active.png"
      },
      {
        'pagePath':'pages/cart',
        'text':'购物车',
        "iconPath":"static/images/cart.png",
        "selectedIconPath":"static/images/cart-active.png"
      },
      {
        'pagePath':'pages/mine',
        'text':'我的',
       "iconPath":"static/images/my.png",
       "selectedIconPath":"static/images/my-active.png"
      }],
      "selectedColor":'#ff2d4a'
    }
}
</config>
